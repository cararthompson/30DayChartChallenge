window.metoffice=window.metoffice||{};window.metoffice.buttonModal=window.metoffice.buttonModal||{};
window.metoffice.buttonModal={modals:{},scrollPos:0,init:function(a,b,c){var d=window.metoffice.buttonModal,e=window.metoffice.eventBus;b=document.getElementById(b);c=document.getElementById(c);null!==b&&null!==c&&(b.modalName=a,c.modalName=a,b.addEventListener("click",d.showModal),b.addEventListener("keydown",d.showModalKeyboardHandler),d.modals[a]={button:b,modal:c,modalOpen:!1},e.notifyEventSubscribers("button-modal-ready",d.modals[a]))},showModal:function(a){var b=window.metoffice.buttonModal,
c=window.metoffice.eventBus,d=b.modals[a.currentTarget.modalName];"undefined"!==typeof d&&(b.scrollPos=window.scrollY,d.button.setAttribute("aria-expanded","true"),d.modal.classList.remove("hidden"),document.body.classList.add("disable-scroll"),d.modalOpen=!0,c.notifyEventSubscribers("button-modal-show",d),c=d.modal.querySelector(".modal-close-button"),d.modal.addEventListener("keydown",b.modalKeyboardHandler),null!==c&&(c.modalName=a.currentTarget.modalName,c.addEventListener("click",b.closeModalClickHandler),
c.addEventListener("keydown",b.closeModalKeyboardHandler),c.focus()))},showModalKeyboardHandler:function(a){var b=window.metoffice.buttonModal;a.keyCode===window.metoffice.config.keys.ENTER&&(a.preventDefault(),b.showModal(a))},closeModal:function(a){var b=window.metoffice.buttonModal,c=window.metoffice.eventBus;a=b.modals[a.modalName];"undefined"!==typeof a&&(a.button.setAttribute("aria-expanded","false"),a.modal.classList.add("hidden"),document.body.classList.remove("disable-scroll"),a.modalOpen=
!1,window.scrollTo(0,b.scrollPos),c.notifyEventSubscribers("button-modal-close",a),a.modal.removeEventListener("keydown",b.modalKeyboardHandler),c=a.modal.querySelector(".modal-close-button"),c.removeEventListener("click",b.closeModalClickHandler),c.removeEventListener("keydown",b.closeModalKeyboardHandler))},closeModalClickHandler:function(a){window.metoffice.buttonModal.closeModal(a.currentTarget)},closeModalKeyboardHandler:function(a){var b=window.metoffice.buttonModal,c=window.metoffice.domUtil;
a.keyCode===window.metoffice.config.keys.ENTER&&(a.preventDefault(),a=c.getClosest(a.target,".modal-close-button"),b.closeModal(a))},modalKeyboardHandler:function(a){var b=window.metoffice.buttonModal,c=window.metoffice.domUtil;a.keyCode===window.metoffice.config.keys.ESCAPE&&(a.preventDefault(),a=c.getClosest(a.target,".modal"),b.closeModal(a))}};window.metoffice=window.metoffice||{};window.metoffice.component=window.metoffice.component||{};
window.metoffice.component.climateData={fileFormat:"/pub/data/weather/uk/climate/datasets/{parameter}/{order}/{region}.txt",selectBoxes:document.querySelectorAll("#download-form select"),radioButtons:document.querySelectorAll("#download-form input[type\x3d'radio']"),downloadButton:document.getElementById("download-data"),init:function(){var a=window.metoffice.component.climateData,b;a.downloadButton.addEventListener("click",a.download);for(b=0;b<a.selectBoxes.length;b++)a.selectBoxes[b].addEventListener("change",
a.checkSelection);a.checkSelection()},checkSelection:function(){var a=window.metoffice.component.climateData,b=!0,c;for(c=0;c<a.selectBoxes.length;c++)""===a.selectBoxes[c].value&&(b=!1);b?a.downloadButton.removeAttribute("disabled"):a.downloadButton.setAttribute("disabled","")},download:function(a){a.preventDefault();a=window.metoffice.component.climateData;var b=a.fileFormat,c;for(c=0;c<a.selectBoxes.length;c++)b=b.replace("{"+a.selectBoxes[c].getAttribute("id")+"}",a.selectBoxes[c].value);for(c=
0;c<a.radioButtons.length;c++)a.radioButtons[c].checked&&(b=b.replace("{"+a.radioButtons[c].getAttribute("name")+"}",a.radioButtons[c].value));window.open(b)}};window.addEventListener("DOMContentLoaded",window.metoffice.component.climateData.init);